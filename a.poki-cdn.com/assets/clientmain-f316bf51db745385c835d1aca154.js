"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3939],{18864:(e,t,a)=>{a.d(t,{Ay:()=>v,rv:()=>y});var s=a(20038),o=a(43346),n=a(23260),i=a(90385),r=a(8811),c=a(89625),d=a(16536);const u=["immersiveTakeover","custom","apiOverride","base"],l={base:r.V.default,apiOverride:null,immersiveTakeover:null},g=(0,s.Z0)({name:"background",initialState:l,reducers:{unsetBackground:()=>l,setBackground:(e,t)=>{const{layer:a,background:s}=t.payload;e[a]=s}},selectors:{selectBackground:e=>{let t=e.base;return Object.values(u).some((a=>!!e[a]&&(t=e[a],!0))),t},selectIsImmersiveTakeover:e=>null!==e.immersiveTakeover}}),{unsetBackground:p,setBackground:m}=g.actions,{selectBackground:y,selectIsImmersiveTakeover:h}=g.selectors;(0,d.Zv)({matcher:(0,s.i0)(n.y),effect:(e,t)=>{const a=t.getState(),s=(0,i.K5)(a),o=y(a);if(null==o||!o.sticky)if("preview"!==s)if("mystery"!==s)if("game"!==s)if("category"!==s)t.dispatch(p());else{const e=(0,i.N2)(a),s=(0,c.r)(e.id);t.dispatch(m({layer:"custom",background:s}))}else{const e=(0,i.Vv)(a),s=(0,c.P)(e);t.dispatch(m({layer:"custom",background:s}))}else{const{mystery:e}=r.V;t.dispatch(m({layer:"custom",background:e}))}else{const{preview:e}=r.V;t.dispatch(m({layer:"custom",background:e}))}}}),(0,d.Zv)({type:o.jO.type,effect:(e,t)=>{var a;const{background:s}=(null==e||null===(a=e.takeover)||void 0===a?void 0:a.config)||{};s&&t.dispatch(m({layer:"immersiveTakeover",background:{...s,style:"dual-cover"}}))}}),(0,d.Zv)({type:o.jp.type,effect:(e,t)=>{t.dispatch(p())}});const v=g.reducer},48554:(e,t,a)=>{a.d(t,{Ay:()=>X,Br:()=>h,Gs:()=>R,Kj:()=>j,QE:()=>x,QX:()=>M,TQ:()=>b,UO:()=>G,cD:()=>B,gO:()=>D,h8:()=>w,iG:()=>S,iw:()=>q,kK:()=>A,kj:()=>z,lT:()=>Z,lh:()=>k,m$:()=>L,on:()=>_,pT:()=>Q,qA:()=>O,u9:()=>C,vA:()=>F,wZ:()=>v,wj:()=>K,x9:()=>$,yd:()=>E,yq:()=>f,zM:()=>T});var s=a(20038),o=a(8120),n=a(90385),i=a(67662),r=a(78740),c=a(72641),d=a(40890),u=a(13150),l=a(46493),g=a(67893),p=a(17782),m=a(16536);const y=(0,s.Z0)({name:"game",initialState:{isFullscreen:!1,wasFullscreen:!1,showAdStatus:!1,adStatusEvent:"",adDuration:0,adCurrentTime:0,loadingFinished:!1},reducers:{setFullscreen:(e,t)=>{e.isFullscreen=t.payload.toggle,e.wasFullscreen=e.wasFullscreen||t.payload.toggle},gameLoadingFinished:e=>{e.loadingFinished=!0},setPubHostData:(e,t)=>{const{gameId:a,data:s}=t.payload;e[a]={...e[a],pubHostData:s}},showAdStatus:e=>{e.showAdStatus=!0},hideAdStatus:e=>{e.showAdStatus=!1},setAdStatusEvent:(e,t)=>{e.adStatusEvent=t.payload.event},setAdDurationAndProgress:(e,t)=>{e.adDuration=t.payload.duration,e.adCurrentTime=t.payload.currentTime}}}),h=(0,p.A)("game/boot"),v=(0,p.A)("game/receive_game_event"),f=(0,p.A)("game/receive_sdk_details"),k=(0,p.A)("game/request_full_screen"),S=(0,p.A)("game/pub_host_initialized"),w=(0,p.A)("game/set_poki_url_params"),b=(0,p.A)("game/receive_command"),A=(0,p.A)("game/generate_screenshot"),C=(0,p.A)("game/receive_screenshot"),_=(0,p.A)("game/fetch_save_game"),R=(0,p.A)("game/mutate_save_game"),{setFullscreen:D,gameLoadingFinished:$,setPubHostData:q,showAdStatus:F,hideAdStatus:L,setAdStatusEvent:B,setAdDurationAndProgress:O}=y.actions,I=(0,o.Mz)(n.Vv,(e=>e.game),((e,t)=>t[e&&e.id]||{}));function E(e){const t=I(e);return(null==t?void 0:t.pubHostData)||null}function x(e){const t=(0,n.Vv)(e);return!(null==t||!t.fullscreen)}const G=(0,o.Mz)(n.Vv,i.zS,n.K5,r.Bi,((e,t,a,s)=>{var o;return"game"===a?"flash"===(null==e||null===(o=e.file)||void 0===o?void 0:o.render_type)||(null==e?void 0:e.alternative_game_enabled)||t&&!(null!=e&&e.mobile_available):"mystery"===a&&!s})),M=e=>e.game.isFullscreen,T=e=>e.game.wasFullscreen,Z=e=>e.game.showAdStatus,j=e=>e.game.adStatusEvent,z=e=>e.game.adDuration,K=e=>e.game.adCurrentTime,Q=e=>e.game.loadingFinished,N={pubHostInitialized:S,[u.oQ]:v,[u.Oi]:f,[u.AU]:w,[u.zR]:b,[u.RC]:C,fetchSaveGame:_,mutateSaveGame:R,SaveGameMigrator:!0,pokiLoader:!0},V=["localhost","games.poki.com","game-cdn.poki.com"],H=["pokiMessageEvent","pokiMessageDebug","SaveGameMigrator","pokiLoader"],P=(0,g.KV)()?"https://games.poki.com":"*";function U({event:e,dispatch:t}){const a=function({event:e}){const{type:t}=e.data||{};if(!t||!N[t]||"function"!=typeof N[t])return!1;const a=(0,d.aX)(e.origin)||"",s=V.includes(a)||a.endsWith(".poki-gdn.com")||window.location.origin===e.origin,o=document.querySelector('iframe[name="gameFrame"]'),n=o&&o.src.startsWith(e.origin);return s||n}({event:e});if(!a)return;const{content:s,type:o}=e.data;if(H.includes(o)&&function({type:e,content:t}){(0,l.F)({category:"sdk",action:"message",data:{content:t,type:e}}),window.parent!==window&&window.parent.postMessage({type:e,content:t},P)}({type:o,content:s}),"function"==typeof N[o]){const a=e.source;t(N[o]({...s,source:a}))}}(0,m.Zv)({type:c.SG.type,effect:(e,t)=>{const{dispatch:a}=t;void 0!==window.pokiMessageListener&&window.removeEventListener("message",window.pokiMessageListener),window.pokiMessageBuffer&&window.pokiMessageBuffer.forEach((e=>{U({event:e,dispatch:a})})),window.addEventListener("message",(e=>{U({event:e,dispatch:a})}))}});const X=y},6788:(e,t,a)=>{a.d(t,{Ay:()=>h,X$:()=>l,fy:()=>y,p3:()=>u,x0:()=>d});var s=a(20038),o=a(98708),n=a(90385),i=a(88800),r=a(48554);const c=(0,s.Z0)({name:"bugReport",initialState:{isReporting:!1,reportData:null},reducers:{openReportBug:e=>{e.isReporting=!0},closeReportBug:e=>{e.isReporting=!1},setBugReportData:(e,t)=>{e.reportData=t.payload.message}}}),d=e=>e.bugReport.isReporting,u=e=>e.bugReport.reportData,l=(0,s.VP)("bugReport/sendReportBug"),{openReportBug:g,closeReportBug:p,setBugReportData:m}=c.actions,y=()=>async(e,t)=>{const a=t(),s=(0,o.K)(a),c=(0,n.Vv)(a);if(!c)return;e(g());const d=Date.now(),u=`feedback-input-${d}`,y=`feedback-checkbox-${d}`,h=s.what_bug.replace("%title",`<strong>${c.title}?</strong>`),v={id:d,title:h,titleIcon:{svgName:"report",width:24,height:24},childComponent:{name:"ReportBugNotification",props:{feedbackInputId:u,feedbackCheckboxId:y}},clickOutsideToClose:!0,onClose:()=>{e(p())},actions:[{title:s.send,onClick:()=>{var t,a;const o=null===(t=document.getElementById(u))||void 0===t?void 0:t.value;e(m({message:o})),null!==(a=document.getElementById(y))&&void 0!==a&&a.checked?e((0,r.kK)({callback:"bugReport"})):e(l()),e((0,i.oe)({id:d}));const n={notification:{title:s.thank_you,theme:"feedback",autoExpire:4e3}};e((0,i.Gg)(n))}}]};e((0,i.Gg)({notification:v}))},h=c},97454:(e,t,a)=>{a.d(t,{Ay:()=>S,Lb:()=>f,Od:()=>k});var s=a(8120),o=a(20038),n=a(16536),i=a(822),r=a(46493),c=a(53490);let d=null;const u=e=>e.eastereggs.endpoint,l=(0,s.Mz)((e=>e.eastereggs.eggs),(e=>e.flatMap((e=>e.triggers.search.query.map((t=>[t,e])))).reduce(((e,[t,a])=>(e[t]=a,e)),{}))),g=(0,s.Mz)(l,((e,t)=>t),((e,t)=>e[t])),p=(0,o.zD)("eastereggs/fetchManifest",(async(e,{getState:t})=>{const a=u(t()),s=await fetch(`${a}/eggs.json`);return{eggs:await s.json()}})),m=(0,o.Z0)({name:"eastereggs",initialState:{customLogo:null,customFavicon:null,eggs:[],endpoint:"https://easter-eggs.poki-cdn.com"},reducers:{setCustomLogo:(e,t)=>{e.customLogo=t.payload},setCustomFavicon:(e,t)=>{e.customFavicon=t.payload},setEggEndpoint:(e,t)=>{e.endpoint=t.payload}},extraReducers:e=>{e.addCase(p.fulfilled,((e,t)=>{e.eggs=t.payload.eggs,d=new c.Y,d.prepare()}))}}),{setCustomLogo:y,setCustomFavicon:h,setEggEndpoint:v}=m.actions;(0,n.Zv)({type:i.rf.type,effect:(e,t)=>{t.dispatch(p())}}),(0,n.Zv)({type:i.Ri.type,effect:async(e,t)=>{const a=t.getState(),s=e.payload.query.toLowerCase(),o=g(a,s),n=u(a);if(void 0===o)return;(0,r.F)({category:"easteregg",action:"search",label:s,options:{interaction:!0}});const c=`${n}/${o.entrypoint}`,l=await import(c);!1!==o.triggers.search.close&&t.dispatch((0,i.QL)()),await l.default({listenerApi:t,audioApi:d})}});const f=e=>e.eastereggs.customLogo,k=e=>e.eastereggs.customFavicon,S=m},88800:(e,t,a)=>{a.d(t,{Ay:()=>c,Gg:()=>o,hk:()=>r,oe:()=>i,ww:()=>n});const s=(0,a(20038).Z0)({name:"notifications",initialState:{stack:[],muted:[]},reducers:{setNotification:(e,t)=>{const{notification:a}=t.payload;a.id=a.id||Date.now(),a.isClosed=a.isClosed||!1,e.stack.push(a)},removeNotification:(e,t)=>{e.stack=e.stack.filter((e=>e.id!==t.payload.id))},setCloseNotification:(e,t)=>{const{id:a}=t.payload;e.stack=e.stack.map((t=>t.id===a?(t.muteAfterClose&&e.muted.push(a),{...t,isClosed:!0}):t))}}}),{setNotification:o,removeNotification:n,setCloseNotification:i}=s.actions,r=(e,t)=>e.notifications.muted.includes(t),c=s},822:(e,t,a)=>{a.d(t,{Ay:()=>L,Bb:()=>R,Hu:()=>b,QL:()=>F,Ri:()=>$,Se:()=>q,mr:()=>A,rf:()=>D,vK:()=>C});var s=a(20038),o=a(67662),n=a(90385),i=a(88421),r=a(29194),c=a(53210),d=a(46278),u=a(80382),l=a(46493),g=a(40890),p=a(34931),m=a(16536);const y=`${(0,d.G6)()}/search/query`,h=`${(0,d.G6)()}/category`,v={content:[]},f={query:"",expanded:!1,results:v,pending:!1,doneOnce:!1,error:!1,popularSearches:[],searchSessionId:0,quickSearchCategories:[]},k=(e,t,a)=>({data:(0,u.rL)(e,t,a),score:(null==a?void 0:a.score)||("game"===t?1:0)});function S({site:e,device:t,hits:a}){const s=function({site:e,device:t,hits:a}){var s,o;const n=(null==a||null===(s=a.categories)||void 0===s?void 0:s.map((t=>k(e,"category",t))))||[],i=(null==a||null===(o=a.games)||void 0===o?void 0:o.map((t=>k(e,"game",t))))||[];return{categories:n,games:"mobile"===t?i.filter((e=>e.data.mobile)):i}}({site:e,device:t,hits:a}),o=[...s.categories.map((e=>({...e,category:!0}))),...s.games];return o.sort(((e,t)=>t.score-e.score)),"mobile"===t&&o.splice(50),o}function w({state:e,query:t,numberOfResults:a=0,isQuickCategorySearch:s=!1}){const o=(0,i.Ie)(e),r=(0,n.K5)(e),c=a>0?"success":"empty";(0,l.F)({category:"search",action:"results",label:r,data:{query:t,result:c,numberOfResults:a,searchSessionId:o,isQuickCategorySearch:s}})}const b=(0,s.zD)("search/fetchSearch",(async(e,t)=>{if(e.query.length<2)return{content:[]};const a=t.getState(),s=(0,r.Gd)(a),n=(0,o.xp)(a),i=(0,o.wu)(a),d=(0,c.p)(a),u=await fetch(`${y}/${s.id}?q=${encodeURIComponent(e.query)}&device=${n}&country=${i}${d?`&experiment=${d}`:""}`),l=await u.json();if(!l.categories.length&&!l.games.length)return w({state:a,query:e.query}),{content:[]};const g=S({site:s,device:n,hits:l});return w({state:a,query:e.query,numberOfResults:g.length}),{content:g}})),A=(0,s.zD)("search/fetchQuickSearchCategories",(async(e,t)=>{const a=t.getState(),s=(0,r.Gd)(a),n=(0,o.wu)(a),i=(0,o.xp)(a),c=await fetch(`${(0,d.G6)()}/quicksearch?site=${s.id}&country=${n}&device=${i}`);return(await c.json()).map((({title:e,slug:t})=>({title:e,slug:t,url:(0,g.AO)(s,"category",t)})))})),C=(0,s.zD)("search/fetchSearchCategoryResults",(async(e,t)=>{if(!e)return{content:[]};const a=t.getState(),s=(0,r.Gd)(a),n=(0,o.xp)(a),i=(0,o.wu)(a),d=(0,c.p)(a),u=await fetch(`${h}/${encodeURIComponent(e)}?site=${s.id}&device=${n}&country=${i}${d?`&experiment=${d}`:""}`),l=await u.json(),g={categories:l.related_categories||[],games:l.games||[]};return w({state:a,query:e,numberOfResults:g.categories.length+g.games.length,isQuickCategorySearch:!0}),{content:S({site:s,device:n,hits:g})}})),_=(0,s.Z0)({name:"search",initialState:f,reducers:{closeSearch(e){e.expanded=!1,e.doneOnce=!1,e.error=!1,e.pending=!1,e.results=v},openSearch(e){e.searchSessionId=(0,p.u)(),e.expanded=!0,e.query=""},setSearchQuery(e,t){e.query=t.payload.query},resetSearch(e){e.query="",e.results=v,e.pending=!1,e.doneOnce=!1,e.error=!1},closeSearchIfOpen(e){e.expanded&&(e.expanded=!1)}},extraReducers:e=>{e.addCase(b.pending,(e=>{e.pending=!0})).addCase(b.fulfilled,((e,t)=>{e.pending=!1,e.results=[...t.payload.content]})).addCase(b.rejected,(e=>{e.pending=!1,e.error=!0})).addCase(C.pending,(e=>{e.pending=!0})).addCase(C.fulfilled,((e,t)=>{e.pending=!1,e.results=[...t.payload.content]})).addCase(C.rejected,(e=>{e.pending=!1,e.error=!0})).addCase(A.fulfilled,((e,t)=>{e.quickSearchCategories=t.payload}))}}),{closeSearch:R,openSearch:D,setSearchQuery:$,resetSearch:q,closeSearchIfOpen:F}=_.actions;(0,m.Zv)({matcher:(0,s.i0)(D,R,F),effect:(e,t)=>{const a=t.getState(),s=(0,i.Ie)(a),o=(0,n.K5)(a),r=e.type===D.type?"open":"close";(0,l.F)({category:"searchPanel",action:r,label:o,data:{searchSessionId:s},options:{interaction:!0}})}});const L=_}}]);